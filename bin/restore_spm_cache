#!/bin/bash -eu

PACKAGE_RESOLVED_LOCATION=$1
PACKAGE_RESOLVED_HASH=$(hash_file $PACKAGE_RESOLVED_LOCATION)
CACHEKEY="$BUILDKITE_PIPELINE_SLUG-spm-cache-$PACKAGE_RESOLVED_HASH"

restore_cache "$CACHEKEY"

# If this is the first time we've seen this particular cache key, save it for the future
save_cache vendor/spm "$CACHEKEY"
