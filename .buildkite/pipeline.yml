steps:
  - label: ":bash: Check Script Permissions"
    command: |
      for file in bin/*.sh; do
        if ! [ -x "$file" ]; then
          echo "$file is not executable!"
          exit 1
        fi
      done
  - label: ":shell: Lint (Shellcheck)"
    plugins:
      shellcheck#v1.2.0:
        files: ["hooks/**", "bin/**"]
        options: ["--exclude=SC1071"] # Ignore scripts that are not written in bash (especially ruby scripts)

  - label: ":sparkles: Lint (Buildkite Plugin Linter)"
    plugins:
      plugin-linter#v2.0.0:
        id: automattic/a8c-ci-toolkit

  - label: ":docker: Test"
    plugins:
      docker-compose#v3.7.0:
        run: tests
